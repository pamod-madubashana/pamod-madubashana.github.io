import{a as n,j as e}from"./ui-DPnNW4ni.js";import{C,b as P,a as _,c as H}from"./card-ym6MFvau.js";import{c as k,t as F,k as R,v as U,B as h,n as G,w as q,o as J,I as x,A as l,P as V,C as X}from"./index-Dx5v8yqI.js";import{L as g}from"./label-DmA-F2II.js";import{r as K,a as Q,b as W}from"./orderUtils-bYC2vQTX.js";import{P as Y,S as Z,T as ee,C as se}from"./ConfirmDialog-DgWKC2-n.js";import{S as re}from"./save-BTuPkDTy.js";import{S as te}from"./search-B5enNqV0.js";import{H as I}from"./heart-DhfZMUl1.js";import{M as ae,C as ne}from"./music-BJ5ESUZ6.js";import{D as oe}from"./database-B7T9m_4t.js";const ie=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],le=k("book-open",ie);const ce=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],de=k("gamepad-2",ce),we=()=>{const{token:a}=F(),[i,m]=n.useState([]),[j,b]=n.useState([]),[f,D]=n.useState(""),[S,$]=n.useState(!0),[A,u]=n.useState(!1),[r,c]=n.useState(null),[o,p]=n.useState({icon:"Heart",label:"",order:0}),[y,v]=n.useState({isOpen:!1,id:"",type:""});n.useEffect(()=>{(async()=>{try{const t=await fetch(`${l}/interests`,{headers:{Authorization:`Bearer ${a}`}}),d=await t.json();t.ok&&m(d)}catch(t){console.error("Error fetching interests:",t)}finally{$(!1)}})()},[a]),n.useEffect(()=>{if(!f)b(i);else{const s=f.toLowerCase();b(i.filter(t=>t.label.toLowerCase().includes(s)))}},[f,i]);const O=async()=>{try{if(await Q(i,o.order,"/interests",a),(await fetch(`${l}/interests`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(o)})).ok){const d=await(await fetch(`${l}/interests`,{headers:{Authorization:`Bearer ${a}`}})).json();m(d),p({icon:"Heart",label:"",order:0}),u(!1)}}catch(s){console.error("Error creating interest:",s)}},T=async()=>{if(r)try{if(await K(i,r._id,r.order,"/interests",a),(await fetch(`${l}/interests/${r._id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify(r)})).ok){const d=await(await fetch(`${l}/interests`,{headers:{Authorization:`Bearer ${a}`}})).json();m(d),c(null)}}catch(s){console.error("Error updating interest:",s)}},B=async s=>{try{const t=i.find(N=>N._id===s);if(!t)return;if(await W(i,t.order,"/interests",a),(await fetch(`${l}/interests/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok){const M=await(await fetch(`${l}/interests`,{headers:{Authorization:`Bearer ${a}`}})).json();m(M)}}catch(t){console.error("Error deleting interest:",t)}},z=(s,t)=>{v({isOpen:!0,id:s,type:t})},w=()=>{v({isOpen:!1,id:"",type:""})},E=()=>{B(y.id),w()},L=s=>{switch(s){case"Code2":return X;case"Database":return oe;case"Palette":return V;case"Coffee":return ne;case"Gamepad2":return de;case"BookOpen":return le;case"Music":return ae;case"Heart":return I;default:return I}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen from-gray-900 to-gray-800 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("header",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Interests Manager"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your personal interests"})]}),e.jsxs(R,{open:A,onOpenChange:u,children:[e.jsx(U,{asChild:!0,children:e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4"}),"New Interest"]})}),e.jsxs(G,{className:"max-w-3xl max-h-[90vh] overflow-y-auto bg-gray-900 text-white border border-gray-700",children:[e.jsx(q,{children:e.jsx(J,{children:r?"Edit Interest":"Add New Interest"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"label",children:"Interest Label"}),e.jsx(x,{id:"label",value:r?r.label:o.label,onChange:s=>r?c({...r,label:s.target.value}):p({...o,label:s.target.value}),placeholder:"e.g., Telegram Bot Development",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"icon",children:"Icon"}),e.jsxs("select",{id:"icon",value:r?r.icon:o.icon,onChange:s=>r?c({...r,icon:s.target.value}):p({...o,icon:s.target.value}),className:"w-full rounded-md border-none bg-gray-800 px-3 py-2 text-white focus:ring-0 focus:ring-offset-0",children:[e.jsx("option",{value:"Heart",children:"Heart"}),e.jsx("option",{value:"Code2",children:"Code"}),e.jsx("option",{value:"Database",children:"Database"}),e.jsx("option",{value:"Palette",children:"Palette"}),e.jsx("option",{value:"Coffee",children:"Coffee"}),e.jsx("option",{value:"Gamepad2",children:"Gamepad"}),e.jsx("option",{value:"BookOpen",children:"Book"}),e.jsx("option",{value:"Music",children:"Music"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"order",children:"Order"}),e.jsx(x,{id:"order",type:"number",value:r?r.order:o.order,onChange:s=>r?c({...r,order:parseInt(s.target.value)}):p({...o,order:parseInt(s.target.value)}),placeholder:"Order position",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(h,{variant:"outline",onClick:()=>{u(!1),c(null)},className:"border-input text-foreground hover:bg-accent hover:text-accent-foreground",children:"Cancel"}),e.jsxs(h,{onClick:r?T:O,children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),r?"Update":"Add"]})]})]})]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(x,{placeholder:"Search interests...",value:f,onChange:s=>D(s.target.value),className:"flex h-10 w-full rounded-md border border-input bg-white dark:bg-slate-800 text-gray-900 dark:text-white px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10"})]})}),S?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading interests..."})}):j.length===0?e.jsx(C,{className:"glass border border-primary/30",children:e.jsx(P,{className:"py-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No interests found"})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(s=>{const t=L(s.icon);return e.jsxs(C,{className:"glass border border-primary/30 relative",children:[e.jsx("div",{className:"absolute -top-2 -left-2 bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold z-10",children:s.order}),e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:e.jsxs(H,{className:"flex items-center gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-primary"}),s.label]})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(h,{size:"sm",variant:"ghost",onClick:()=>{c(s),u(!0)},className:"h-8 w-8 p-0",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx(h,{size:"sm",variant:"ghost",onClick:()=>z(s._id,"delete"),className:"h-8 w-8 p-0 text-red-500 hover:text-red-500",children:e.jsx(ee,{className:"w-4 h-4"})})]})]})})]},s._id)})})]})}),e.jsx(se,{isOpen:y.isOpen,onClose:w,onConfirm:E,title:"Confirm Deletion",message:"Are you sure you want to delete this interest? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"destructive"})]})};export{we as default};
