import{a as n,j as e}from"./ui-DPnNW4ni.js";import{c as C,t as L,x as A,I as l,B as P,y as F,A as E}from"./index-FvscKpJa.js";import{C as j,a as p,c as f,d as S,b as y}from"./card-CSQhpvfX.js";import{L as r}from"./label-D5jxcCqS.js";import{S as h}from"./switch-CZc7zi7O.js";import{S as T}from"./settings-CK9bP5lf.js";import{S as B}from"./save-DHkxwqSN.js";import"./index-BfNW_BBT.js";const I=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_=C("circle-check-big",I),J=()=>{const[a,o]=n.useState({siteSections:{showProjects:!0,showArticles:!0,showContact:!0},socialLinks:{github:"",linkedin:"",telegram:"",email:""}}),[v,b]=n.useState(!0),[m,g]=n.useState(!1),[w,x]=n.useState(!1),{token:u}=L();n.useEffect(()=>{(async()=>{try{const t=await F.getSettings(!0);o(i=>({...i,...t,socialLinks:{github:"",linkedin:"",telegram:"",email:"",...i.socialLinks||{},...t.socialLinks||{}}}))}catch(t){console.error("Error fetching settings:",t)}finally{b(!1)}})()},[u]);const d=(s,t)=>{o(i=>({...i,siteSections:{...i.siteSections,[s]:t}}))},c=(s,t)=>{o(i=>({...i,socialLinks:{...i.socialLinks,[s]:t}}))},{refreshSettings:k}=A(),N=async s=>{s.preventDefault(),g(!0);try{console.log("Sending settings to backend:",a);const t=await fetch(`${E}/settings`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${u}`},body:JSON.stringify(a)}),i=await t.text();console.log("Response from backend:",t.status,i),t.ok?(x(!0),await k(!0),setTimeout(()=>x(!1),3e3)):console.error("Error saving settings:",t.status,i)}catch(t){console.error("Network error saving settings:",t)}finally{g(!1)}};return v?e.jsx("div",{className:"min-h-screen flex items-center justify-center from-gray-900 to-gray-800 p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading settings..."})]})}):e.jsx("div",{className:"min-h-screen from-gray-900 to-gray-800 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(T,{className:"w-8 h-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Site Settings"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your portfolio site configuration"})]}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs(j,{className:"glass border border-primary/30 h-full",children:[e.jsxs(p,{children:[e.jsx(f,{children:"Social Links"}),e.jsx(S,{children:"Connect with visitors on social platforms"})]}),e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"github",children:"GitHub Profile"}),e.jsx(l,{id:"github",type:"url",value:a.socialLinks.github||"",onChange:s=>c("github",s.target.value),placeholder:"https://github.com/username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"linkedin",children:"LinkedIn Profile"}),e.jsx(l,{id:"linkedin",type:"url",value:a.socialLinks.linkedin||"",onChange:s=>c("linkedin",s.target.value),placeholder:"https://linkedin.com/in/username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"telegram",children:"Telegram Profile"}),e.jsx(l,{id:"telegram",type:"url",value:a.socialLinks.telegram||"",onChange:s=>c("telegram",s.target.value),placeholder:"https://t.me/username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"email",children:"Email Address"}),e.jsx(l,{id:"email",type:"email",value:a.socialLinks.email||"",onChange:s=>c("email",s.target.value),placeholder:"you@example.com"})]})]})})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs(j,{className:"glass border border-primary/30 h-full",children:[e.jsxs(p,{children:[e.jsx(f,{children:"Site Sections"}),e.jsx(S,{children:"Control which sections are visible"})]}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"showProjects",children:"Show Projects Section"}),e.jsx(h,{id:"showProjects",checked:a.siteSections.showProjects,onCheckedChange:s=>d("showProjects",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"showArticles",children:"Show Articles Section"}),e.jsx(h,{id:"showArticles",checked:a.siteSections.showArticles,onCheckedChange:s=>d("showArticles",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"showContact",children:"Show Contact Section"}),e.jsx(h,{id:"showContact",checked:a.siteSections.showContact,onCheckedChange:s=>d("showContact",s)})]})]})})]})})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[e.jsx(P,{type:"submit",disabled:m,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4"}),"Save Settings"]})}),w&&e.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[e.jsx(_,{className:"w-4 h-4"}),"Settings saved successfully!"]})]})]})]})})};export{J as default};
