import{a as o,j as e}from"./ui-DPnNW4ni.js";import{C as N,b as I,a as F,c as R,d as _}from"./card-ym6MFvau.js";import{t as G,k as U,v as H,B as u,n as M,w as J,o as q,I as f,A as d,G as Y,P as K}from"./index-Dx5v8yqI.js";import{L as h}from"./label-DmA-F2II.js";import{r as Q,a as V,b as W}from"./orderUtils-bYC2vQTX.js";import{P as X,S as Z,T as ee,C as re}from"./ConfirmDialog-DgWKC2-n.js";import{S as se}from"./save-BTuPkDTy.js";import{S as te}from"./search-B5enNqV0.js";import{B as T,T as ae}from"./terminal--cJ3f2Lt.js";import{C as ie}from"./cloud-Bkdqofz6.js";import{C as oe}from"./clock-BhQyW4f1.js";const je=()=>{const{token:i}=G(),[l,g]=o.useState([]),[j,y]=o.useState([]),[p,D]=o.useState(""),[S,k]=o.useState(!0),[B,x]=o.useState(!1),[s,n]=o.useState(null),[a,c]=o.useState({year:"",role:"",company:"",description:"",icon:"Briefcase",order:0}),[v,b]=o.useState({isOpen:!1,id:"",type:""});o.useEffect(()=>{(async()=>{try{const t=await fetch(`${d}/dashboard/enhanced/timeline`,{headers:{Authorization:`Bearer ${i}`}}),m=await t.json();t.ok&&g(m)}catch(t){console.error("Error fetching timeline items:",t)}finally{k(!1)}})()},[i]),o.useEffect(()=>{if(!p)y(l);else{const r=p.toLowerCase();y(l.filter(t=>t.year.toLowerCase().includes(r)||t.role.toLowerCase().includes(r)||t.company.toLowerCase().includes(r)||t.description.toLowerCase().includes(r)))}},[p,l]);const $=async()=>{try{if(await V(l,a.order,"/timeline",i),(await fetch(`${d}/timeline`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(a)})).ok){const m=await(await fetch(`${d}/timeline`,{headers:{Authorization:`Bearer ${i}`}})).json();g(m),c({year:"",role:"",company:"",description:"",icon:"Briefcase",order:0}),x(!1)}}catch(r){console.error("Error creating timeline item:",r)}},z=async()=>{if(s)try{if(await Q(l,s._id,s.order,"/timeline",i),(await fetch(`${d}/timeline/${s._id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(s)})).ok){const m=await(await fetch(`${d}/timeline`,{headers:{Authorization:`Bearer ${i}`}})).json();g(m),n(null)}}catch(r){console.error("Error updating timeline item:",r)}},E=async r=>{try{const t=l.find(C=>C._id===r);if(!t)return;if(await W(l,t.order,"/timeline",i),(await fetch(`${d}/timeline/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}})).ok){const P=await(await fetch(`${d}/timeline`,{headers:{Authorization:`Bearer ${i}`}})).json();g(P)}}catch(t){console.error("Error deleting timeline item:",t)}},A=(r,t)=>{b({isOpen:!0,id:r,type:t})},w=()=>{b({isOpen:!1,id:"",type:""})},O=()=>{E(v.id),w()},L=r=>{switch(r){case"Clock":return oe;case"Briefcase":return T;case"Terminal":return ae;case"Palette":return K;case"Cloud":return ie;case"Github":return Y;default:return T}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen from-gray-900 to-gray-800 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("header",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Timeline Manager"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your professional timeline"})]}),e.jsxs(U,{open:B,onOpenChange:x,children:[e.jsx(H,{asChild:!0,children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"New Timeline Item"]})}),e.jsxs(M,{className:"max-w-3xl max-h-[90vh] overflow-y-auto bg-gray-900 text-white border border-gray-700",children:[e.jsx(J,{children:e.jsx(q,{children:s?"Edit Timeline Item":"Create New Timeline Item"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"year",children:"Year"}),e.jsx(f,{id:"year",value:s?s.year:a.year,onChange:r=>s?n({...s,year:r.target.value}):c({...a,year:r.target.value}),placeholder:"e.g., 2024 - Present",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"role",children:"Role"}),e.jsx(f,{id:"role",value:s?s.role:a.role,onChange:r=>s?n({...s,role:r.target.value}):c({...a,role:r.target.value}),placeholder:"e.g., Software Engineer",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"company",children:"Company"}),e.jsx(f,{id:"company",value:s?s.company:a.company,onChange:r=>s?n({...s,company:r.target.value}):c({...a,company:r.target.value}),placeholder:"e.g., Acme Corp",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",value:s?s.description:a.description,onChange:r=>s?n({...s,description:r.target.value}):c({...a,description:r.target.value}),placeholder:"Describe your role and responsibilities",className:"min-h-[100px] w-full rounded-md border-none bg-gray-800 px-3 py-2 text-white placeholder-gray-400 focus:ring-0 focus:ring-offset-0 resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"icon",children:"Icon"}),e.jsxs("select",{id:"icon",value:s?s.icon:a.icon,onChange:r=>s?n({...s,icon:r.target.value}):c({...a,icon:r.target.value}),className:"w-full rounded-md border-none bg-gray-800 px-3 py-2 text-white focus:ring-0 focus:ring-offset-0",children:[e.jsx("option",{value:"Briefcase",children:"Briefcase"}),e.jsx("option",{value:"Clock",children:"Clock"}),e.jsx("option",{value:"Terminal",children:"Terminal"}),e.jsx("option",{value:"Palette",children:"Palette"}),e.jsx("option",{value:"Cloud",children:"Cloud"}),e.jsx("option",{value:"Github",children:"GitHub"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"order",children:"Order"}),e.jsx(f,{id:"order",type:"number",value:s?s.order:a.order,onChange:r=>s?n({...s,order:parseInt(r.target.value)}):c({...a,order:parseInt(r.target.value)}),placeholder:"Order position",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(u,{variant:"outline",onClick:()=>{x(!1),n(null)},className:"border-input text-foreground hover:bg-accent hover:text-accent-foreground",children:"Cancel"}),e.jsxs(u,{onClick:s?z:$,children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),s?"Update":"Create"]})]})]})]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(f,{placeholder:"Search timeline items...",value:p,onChange:r=>D(r.target.value),className:"flex h-10 w-full rounded-md border border-input bg-white dark:bg-slate-800 text-gray-900 dark:text-white px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10"})]})}),S?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading timeline items..."})}):j.length===0?e.jsx(N,{className:"glass border border-primary/30",children:e.jsx(I,{className:"py-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No timeline items found"})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(r=>{const t=L(r.icon);return e.jsxs(N,{className:"glass border border-primary/30 relative",children:[e.jsx("div",{className:"absolute -top-2 -left-2 bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold z-10",children:r.order}),e.jsxs(F,{children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(t,{className:"w-5 h-5 text-primary"}),r.role]}),e.jsx(_,{className:"mt-1",children:r.company})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>{n(r),x(!0)},className:"h-8 w-8 p-0",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx(u,{size:"sm",variant:"ghost",onClick:()=>A(r._id,"delete"),className:"h-8 w-8 p-0 text-red-500 hover:text-red-500",children:e.jsx(ee,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:r.year})]}),e.jsx(I,{children:e.jsx("p",{className:"text-sm",children:r.description})})]},r._id)})})]})}),e.jsx(re,{isOpen:v.isOpen,onClose:w,onConfirm:O,title:"Confirm Deletion",message:"Are you sure you want to delete this timeline item? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"destructive"})]})};export{je as default};
