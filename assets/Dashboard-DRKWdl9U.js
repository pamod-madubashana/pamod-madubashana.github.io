import{a as c,j as e}from"./ui-DPnNW4ni.js";import{C as g,a as S,b as p}from"./card-CSQhpvfX.js";import{c as A,t as $,r as k,m as i,L as E,B,A as T}from"./index-FvscKpJa.js";import{B as m}from"./badge-ICiN6x2s.js";import{F as h,P as f}from"./package-CVZ3V_AG.js";import{C as j}from"./clock-DZoQSkJ4.js";const I=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],L=A("arrow-up-right",I),U=()=>{const{token:l,user:d}=$(),[y,x]=c.useState(!0),[u,v]=c.useState(null),[s,b]=c.useState(null);c.useEffect(()=>{l&&(async()=>{try{x(!0);const a=await fetch(`${T}/dashboard/enhanced/dashboard`,{headers:{Authorization:`Bearer ${l}`}});if(!a.ok)throw new Error(`Failed to fetch dashboard data: ${a.status}`);const n=await a.json();b(n)}catch(a){console.error("Error fetching dashboard data:",a),v(a instanceof Error?a.message:"Failed to load dashboard data")}finally{x(!1)}})()},[l]);const N=()=>{const t=new Date().getHours();return t>=5&&t<12?"Good morning":t>=12&&t<17?"Good afternoon":t>=17&&t<21?"Good evening":"Good night"},w=s?[{title:"Total Articles",value:s.stats.articles.total.toString(),change:s.stats.articles.change,icon:h,color:"text-blue-400",bgColor:"bg-blue-500/10",trend:"up"},{title:"Active Projects",value:s.stats.projects.total.toString(),change:s.stats.projects.change,icon:f,color:"text-purple-400",bgColor:"bg-purple-500/10",trend:"up"},{title:"Timeline Items",value:s.stats.timeline.total.toString(),change:"+0",icon:k,color:"text-indigo-400",bgColor:"bg-indigo-500/10",trend:"up"},{title:"Tech Skills",value:s.stats.techSkills.total.toString(),change:"+0",icon:h,color:"text-green-400",bgColor:"bg-green-500/10",trend:"up"}]:[],C=t=>{switch(t){case"published":return e.jsx(m,{variant:"default",className:"bg-success/20 text-success border-success/30",children:"Published"});case"draft":return e.jsx(m,{variant:"secondary",className:"bg-warning/20 text-warning border-warning/30",children:"Draft"});default:return e.jsx(m,{variant:"secondary",children:t})}},D=t=>{const a=new Date(t),r=Math.floor((new Date().getTime()-a.getTime())/(1e3*60*60));if(r<1)return"Just now";if(r<24)return`${r} hour${r>1?"s":""} ago`;const o=Math.floor(r/24);return o<7?`${o} day${o>1?"s":""} ago`:a.toLocaleDateString("en-US",{month:"short",day:"numeric",year:o>365?"numeric":void 0})};return e.jsxs(e.Fragment,{children:[e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-2 text-foreground/60",children:[N(),", ",e.jsx("span",{className:"text-gradient",children:(d==null?void 0:d.username)||"Admin"})]}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"Here's what's happening with your portfolio today."})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-1",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:"Updated just now"})]})})})]}),e.jsx("div",{className:"space-y-6",children:y?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(E,{className:"w-8 h-8 text-primary animate-spin"})}):u?e.jsxs("div",{className:"text-center py-20 text-destructive",children:["Error loading dashboard: ",u]}):s?e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:w.map((t,a)=>{const n=t.icon;return e.jsx(i.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1*a},whileHover:{y:-4},className:"group card-hover",children:e.jsxs(g,{className:"glass border border-border hover:border-primary/30 transition-all duration-300 h-full overflow-hidden relative",children:[e.jsx(S,{className:"relative pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`${t.bgColor} p-3 rounded-lg`,children:e.jsx(n,{className:`w-6 h-6 ${t.color}`})}),e.jsxs("div",{className:`flex items-center gap-1 text-sm font-medium ${t.trend==="up"?"text-success":"text-destructive"}`,children:[e.jsx(L,{className:`w-4 h-4 ${t.trend==="down"?"rotate-180":""}`}),t.change]})]})}),e.jsxs(p,{className:"relative pt-0",children:[e.jsx("p",{className:"text-3xl font-bold mb-1",children:t.value}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t.title})]})]})},t.title)})}):e.jsx("div",{className:"text-center py-20 text-muted-foreground",children:"No dashboard data available"})}),e.jsx("div",{className:"mt-8 grid grid-cols-1 gap-6",children:e.jsx(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"space-y-6",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(j,{className:"w-6 h-6 text-primary"}),e.jsx("span",{className:"text-foreground/60",children:"Recent Activity"})]}),e.jsx(B,{variant:"ghost",className:"text-primary hover:text-primary/80",children:"View All"})]}),e.jsx(g,{className:"glass border border-border h-full",children:e.jsx(p,{className:"p-0",children:e.jsx("div",{className:"divide-y divide-border",children:(s==null?void 0:s.recentActivity.map((t,a)=>e.jsx(i.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.1*a},className:"p-4 hover:bg-white/5 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${t.type==="article"?"bg-primary/20 text-primary":"bg-secondary/20 text-secondary"}`,children:t.type==="article"?e.jsx(h,{className:"w-5 h-5"}):e.jsx(f,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:D(t.date)}),e.jsxs("p",{className:"text-xs text-muted-foreground/70",children:["by ",t.author]})]})]}),C(t.status)]})},t.id)))||e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No recent activity"})})})})]})})})]})};export{U as default};
