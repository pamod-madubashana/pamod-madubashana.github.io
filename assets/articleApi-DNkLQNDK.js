import{A as o,r,s as n}from"./index-BNWbYMF_.js";const d={getPublishedArticles:async()=>{const s=n.articles.published(),a=r.get(s);if(a)return a;const t=await fetch(`${o}/articles`);if(!t.ok){const i=await t.text();throw new Error(`Failed to fetch published articles: ${t.status} - ${i}`)}const e=await t.json();return r.set(s,e),e},getAllArticles:async s=>{const a=n.articles.all(),t=r.get(a);if(t)return t;const e=await fetch(`${o}/articles/all`,{headers:{Authorization:`Bearer ${s}`}});if(!e.ok){const c=await e.text();throw new Error(`Failed to fetch all articles: ${e.status} - ${c}`)}const i=await e.json();return r.set(a,i),i},getArticleById:async s=>{const a=n.articles.byId(s),t=r.get(a);if(t)return t;const e=await fetch(`${o}/articles/${s}`);if(!e.ok){const c=await e.text();throw new Error(`Failed to fetch article: ${e.status} - ${c}`)}const i=await e.json();return r.set(a,i),i},createArticle:async(s,a)=>{const t=await fetch(`${o}/articles`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(a)});if(!t.ok){const i=await t.text();throw new Error(`Failed to create article: ${t.status} - ${i}`)}const e=await t.json();return r.invalidate("articles:*"),r.invalidate("dashboard:*"),e},createArticleWithImage:async(s,a)=>{const t=await fetch(`${o}/articles/upload`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:a});if(!t.ok){const i=await t.text();throw new Error(`Failed to create article with image: ${t.status} - ${i}`)}const e=await t.json();return r.invalidate("articles:*"),r.invalidate("dashboard:*"),e},updateArticle:async(s,a,t)=>{const e=await fetch(`${o}/articles/${a}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(t)});if(!e.ok){const c=await e.text();throw new Error(`Failed to update article: ${e.status} - ${c}`)}const i=await e.json();return r.delete(n.articles.byId(a)),r.invalidate("articles:*"),r.invalidate("dashboard:*"),i},updateArticleWithImage:async(s,a,t)=>{const e=await fetch(`${o}/articles/upload/${a}`,{method:"PUT",headers:{Authorization:`Bearer ${s}`},body:t});if(!e.ok){const c=await e.text();throw new Error(`Failed to update article with image: ${e.status} - ${c}`)}const i=await e.json();return r.delete(n.articles.byId(a)),r.invalidate("articles:*"),r.invalidate("dashboard:*"),i},deleteArticle:async(s,a)=>{const t=await fetch(`${o}/articles/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`}});if(!t.ok){const i=await t.text();throw new Error(`Failed to delete article: ${t.status} - ${i}`)}const e=await t.json();return r.delete(n.articles.byId(a)),r.invalidate("articles:*"),r.invalidate("dashboard:*"),e}};export{d as a};
