{"version":3,"file":"Settings--vKKoHQZ.js","sources":["../../node_modules/lucide-react/dist/esm/icons/circle-check-big.js","../../src/pages/Admin/Settings.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21.801 10A10 10 0 1 1 17 3.335\", key: \"yps3ct\" }],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n];\nconst CircleCheckBig = createLucideIcon(\"circle-check-big\", __iconNode);\n\nexport { __iconNode, CircleCheckBig as default };\n//# sourceMappingURL=circle-check-big.js.map\n","import { useState, useEffect } from 'react';\nimport { API_BASE_URL } from '@/lib/apiConfig';\nimport { settingsApi } from '@/api/settingsApi';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { useSettings } from '@/contexts/SettingsContext';\nimport { Settings as SettingsIcon, Save, CheckCircle, XCircle } from 'lucide-react';\n\ninterface Settings {\n  _id?: string;\n  siteSections: {\n    showProjects: boolean;\n    showArticles: boolean;\n    showContact: boolean;\n  };\n  socialLinks: {\n    github?: string;\n    linkedin?: string;\n    telegram?: string;\n    email?: string;\n  };\n}\n\nconst SettingsPage = () => {\n  const [settings, setSettings] = useState<Settings>({\n    siteSections: {\n      showProjects: true,\n      showArticles: true,\n      showContact: true\n    },\n    socialLinks: {\n      github: '',\n      linkedin: '',\n      telegram: '',\n      email: ''\n    }\n  });\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [savedSuccessfully, setSavedSuccessfully] = useState(false);\n  const { token } = useAuth();\n\n  useEffect(() => {\n    const fetchSettings = async () => {\n      try {\n        // Use the settings API with force refresh\n        const data = await settingsApi.getSettings(true); // Force refresh to get latest from backend\n        // Merge API data with default structure to ensure all fields exist\n        setSettings(prev => ({\n          ...prev,\n          ...data,\n          socialLinks: {\n            github: '',\n            linkedin: '',\n            telegram: '',\n            email: '',\n            ...(prev.socialLinks || {}),\n            ...(data.socialLinks || {})\n          }\n        }));\n      } catch (error) {\n        console.error('Error fetching settings:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchSettings();\n  }, [token]);\n\n  const handleChange = (field: string, value: any) => {\n    setSettings(prev => ({\n      ...prev,\n      [field]: value\n    }));\n  };\n\n\n  const handleSectionChange = (field: string, value: boolean) => {\n    setSettings(prev => ({\n      ...prev,\n      siteSections: {\n        ...prev.siteSections,\n        [field]: value\n      }\n    }));\n  };\n\n  const handleSocialChange = (field: string, value: string) => {\n    setSettings(prev => ({\n      ...prev,\n      socialLinks: {\n        ...prev.socialLinks,\n        [field]: value\n      }\n    }));\n  };\n\n  const { refreshSettings } = useSettings();\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setSaving(true);\n    \n    try {\n      console.log('Sending settings to backend:', settings);\n      const response = await fetch(`${API_BASE_URL}/settings`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(settings)\n      });\n      \n      const responseText = await response.text();\n      console.log('Response from backend:', response.status, responseText);\n\n      if (response.ok) {\n        setSavedSuccessfully(true);\n        // Refresh settings to apply changes immediately\n        await refreshSettings(true);\n        setTimeout(() => setSavedSuccessfully(false), 3000);\n      } else {\n        console.error('Error saving settings:', response.status, responseText);\n      }\n    } catch (error) {\n      console.error('Network error saving settings:', error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-gray-800 p-4\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-muted-foreground\">Loading settings...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 p-4 md:p-8\">\n      <div className=\"max-w-6xl mx-auto\">\n        <header className=\"mb-8\">\n          <div className=\"flex items-center gap-3 mb-2\">\n            <SettingsIcon className=\"w-8 h-8 text-primary\" />\n            <h1 className=\"text-3xl font-bold text-white\">Site Settings</h1>\n          </div>\n          <p className=\"text-muted-foreground\">Manage your portfolio site configuration</p>\n        </header>\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Left Column - Social Links */}\n            <div className=\"space-y-6\">\n              <Card className=\"glass border border-primary/30 h-full\">\n                <CardHeader>\n                  <CardTitle>Social Links</CardTitle>\n                  <CardDescription>Connect with visitors on social platforms</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"github\">GitHub Profile</Label>\n                      <Input\n                        id=\"github\"\n                        type=\"url\"\n                        value={settings.socialLinks.github || ''}\n                        onChange={(e) => handleSocialChange('github', e.target.value)}\n                        placeholder=\"https://github.com/username\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"linkedin\">LinkedIn Profile</Label>\n                      <Input\n                        id=\"linkedin\"\n                        type=\"url\"\n                        value={settings.socialLinks.linkedin || ''}\n                        onChange={(e) => handleSocialChange('linkedin', e.target.value)}\n                        placeholder=\"https://linkedin.com/in/username\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"telegram\">Telegram Profile</Label>\n                      <Input\n                        id=\"telegram\"\n                        type=\"url\"\n                        value={settings.socialLinks.telegram || ''}\n                        onChange={(e) => handleSocialChange('telegram', e.target.value)}\n                        placeholder=\"https://t.me/username\"\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label htmlFor=\"email\">Email Address</Label>\n                      <Input\n                        id=\"email\"\n                        type=\"email\"\n                        value={settings.socialLinks.email || ''}\n                        onChange={(e) => handleSocialChange('email', e.target.value)}\n                        placeholder=\"you@example.com\"\n                      />\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n            \n            {/* Right Column - Site Sections */}\n            <div className=\"space-y-6\">\n              <Card className=\"glass border border-primary/30 h-full\">\n                <CardHeader>\n                  <CardTitle>Site Sections</CardTitle>\n                  <CardDescription>Control which sections are visible</CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <Label htmlFor=\"showProjects\">Show Projects Section</Label>\n                      <Switch\n                        id=\"showProjects\"\n                        checked={settings.siteSections.showProjects}\n                        onCheckedChange={(checked) => handleSectionChange('showProjects', checked)}\n                      />\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <Label htmlFor=\"showArticles\">Show Articles Section</Label>\n                      <Switch\n                        id=\"showArticles\"\n                        checked={settings.siteSections.showArticles}\n                        onCheckedChange={(checked) => handleSectionChange('showArticles', checked)}\n                      />\n                    </div>\n                    <div className=\"flex items-center justify-between\">\n                      <Label htmlFor=\"showContact\">Show Contact Section</Label>\n                      <Switch\n                        id=\"showContact\"\n                        checked={settings.siteSections.showContact}\n                        onCheckedChange={(checked) => handleSectionChange('showContact', checked)}\n                      />\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n\n          <div className=\"mt-8 flex justify-end gap-4\">\n            <Button type=\"submit\" disabled={saving} className=\"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white\">\n              {saving ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-current\"></div>\n                  Saving...\n                </>\n              ) : (\n                <>\n                  <Save className=\"w-4 h-4\" />\n                  Save Settings\n                </>\n              )}\n            </Button>\n            {savedSuccessfully && (\n              <div className=\"flex items-center gap-2 text-green-500\">\n                <CheckCircle className=\"w-4 h-4\" />\n                Settings saved successfully!\n              </div>\n            )}\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default SettingsPage;"],"names":["__iconNode","CircleCheckBig","createLucideIcon","SettingsPage","settings","setSettings","useState","loading","setLoading","saving","setSaving","savedSuccessfully","setSavedSuccessfully","token","useAuth","useEffect","data","settingsApi","prev","error","handleSectionChange","field","value","handleSocialChange","refreshSettings","useSettings","handleSubmit","e","response","API_BASE_URL","responseText","jsxs","jsx","SettingsIcon","Card","CardHeader","CardTitle","CardDescription","CardContent","Label","Input","Switch","checked","Button","Fragment","Save","CheckCircle"],"mappings":"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","x_google_ignoreList":[0]}