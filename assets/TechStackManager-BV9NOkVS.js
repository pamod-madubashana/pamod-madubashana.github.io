import{a as n,j as e}from"./ui-DPnNW4ni.js";import{C as w,b as S,a as P,c as U,d as M}from"./card-CB16iZE7.js";import{t as H,k as J,v as q,B as g,n as G,w as K,o as Q,I as j,A as m,z as V}from"./index-COHJ_qjk.js";import{L as v}from"./label-jgiQvNMf.js";import{r as W,a as X,b as Y}from"./orderUtils-B85QFFBF.js";import{P as Z,S as ee,T as se,C as te}from"./ConfirmDialog-DJvRg2s1.js";import{S as re}from"./save-CDhFemti.js";import{S as ae}from"./search-BSork_yF.js";import{C as ie,S as oe}from"./server-Bp8_EkH5.js";import{C as le}from"./cloud-DlboxXxb.js";import{D as ne}from"./database-eDSVNzT8.js";const ke=()=>{const{token:l}=H(),[d,f]=n.useState([]),[k,b]=n.useState([]),[p,D]=n.useState(""),[T,$]=n.useState(!0),[z,x]=n.useState(!1),[t,c]=n.useState(null),[i,h]=n.useState({title:"",icon:"Cpu",skills:[""],order:0}),[C,y]=n.useState({isOpen:!1,id:"",type:""});n.useEffect(()=>{(async()=>{try{const r=await fetch(`${m}/tech-stack-categories`,{headers:{Authorization:`Bearer ${l}`}}),a=await r.json();r.ok&&f(a)}catch(r){console.error("Error fetching tech stack categories:",r)}finally{$(!1)}})()},[l]),n.useEffect(()=>{if(!p)b(d);else{const s=p.toLowerCase();b(d.filter(r=>r.title.toLowerCase().includes(s)||r.skills.some(a=>a.toLowerCase().includes(s))))}},[p,d]);const A=async()=>{try{if(await X(d,i.order,"/tech-stack-categories",l),(await fetch(`${m}/tech-stack-categories`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({...i,skills:i.skills.filter(r=>r.trim()!=="")})})).ok){const a=await(await fetch(`${m}/tech-stack-categories`,{headers:{Authorization:`Bearer ${l}`}})).json();f(a),h({title:"",icon:"Cpu",skills:[""],order:0}),x(!1)}}catch(s){console.error("Error creating tech stack category:",s)}},E=async()=>{if(t)try{if(await W(d,t._id,t.order,"/tech-stack-categories",l),(await fetch(`${m}/tech-stack-categories/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({...t,skills:t.skills.filter(r=>r.trim()!=="")})})).ok){const a=await(await fetch(`${m}/tech-stack-categories`,{headers:{Authorization:`Bearer ${l}`}})).json();f(a),c(null)}}catch(s){console.error("Error updating tech stack category:",s)}},I=async s=>{try{const r=d.find(o=>o._id===s);if(!r)return;if(await Y(d,r.order,"/tech-stack-categories",l),(await fetch(`${m}/tech-stack-categories/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${l}`}})).ok){const u=await(await fetch(`${m}/tech-stack-categories`,{headers:{Authorization:`Bearer ${l}`}})).json();f(u)}}catch(r){console.error("Error deleting tech stack category:",r)}},O=(s,r)=>{y({isOpen:!0,id:s,type:r})},N=()=>{y({isOpen:!1,id:"",type:""})},F=()=>{I(C.id),N()},B=s=>{switch(s.toLowerCase()){case"code":case"frontend":return V;case"server":case"backend":return oe;case"database":return ne;case"cloud":case"devops":return le;default:return ie}},L=s=>{s&&t?c({...t,skills:[...t.skills,""]}):h({...i,skills:[...i.skills,""]})},R=(s,r,a)=>{if(a&&t){const o=[...t.skills];o[s]=r,c({...t,skills:o})}else{const o=[...i.skills];o[s]=r,h({...i,skills:o})}},_=(s,r)=>{if(r&&t){const a=t.skills.filter((o,u)=>u!==s);c({...t,skills:a})}else{const a=i.skills.filter((o,u)=>u!==s);h({...i,skills:a})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("header",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Tech Stack Categories Manager"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your technology stack categories and skills"})]}),e.jsxs(J,{open:z,onOpenChange:x,children:[e.jsx(q,{asChild:!0,children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"}),"New Category"]})}),e.jsxs(G,{className:"max-w-3xl max-h-[90vh] overflow-y-auto bg-gray-900 text-white border border-gray-700",children:[e.jsx(K,{children:e.jsx(Q,{children:t?"Edit Category":"Add New Category"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"title",children:"Category Title"}),e.jsx(j,{id:"title",value:t?t.title:i.title,onChange:s=>t?c({...t,title:s.target.value}):h({...i,title:s.target.value}),placeholder:"e.g., Frontend, Backend, Database",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"icon",children:"Icon"}),e.jsxs("select",{id:"icon",value:t?t.icon:i.icon,onChange:s=>t?c({...t,icon:s.target.value}):h({...i,icon:s.target.value}),className:"w-full rounded-md border border-gray-700 bg-gray-800 px-3 py-2 text-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500",children:[e.jsx("option",{value:"Code",children:"Code (Frontend)"}),e.jsx("option",{value:"Server",children:"Server (Backend)"}),e.jsx("option",{value:"Database",children:"Database"}),e.jsx("option",{value:"Cloud",children:"Cloud (DevOps)"}),e.jsx("option",{value:"Cpu",children:"CPU (General)"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"order",children:"Order"}),e.jsx(j,{id:"order",type:"number",value:t?t.order:i.order,onChange:s=>t?c({...t,order:parseInt(s.target.value)}):h({...i,order:parseInt(s.target.value)}),placeholder:"Order position",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(v,{children:"Skills"}),e.jsx(g,{type:"button",variant:"outline",size:"sm",onClick:()=>L(!!t),className:"border-input text-foreground hover:bg-accent hover:text-accent-foreground",children:"Add Skill"})]}),e.jsx("div",{className:"space-y-2",children:(t?t.skills:i.skills).map((s,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{value:s,onChange:a=>R(r,a.target.value,!!t),placeholder:`Skill ${r+1}`,className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"}),(t?t.skills:i.skills).length>1&&e.jsx(g,{type:"button",variant:"outline",size:"sm",onClick:()=>_(r,!!t),className:"border-input text-foreground hover:bg-accent hover:text-accent-foreground",children:"Remove"})]},r))})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(g,{variant:"outline",onClick:()=>{x(!1),c(null)},className:"border-input text-foreground hover:bg-accent hover:text-accent-foreground",children:"Cancel"}),e.jsxs(g,{onClick:t?E:A,children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),t?"Update":"Add"]})]})]})]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(j,{placeholder:"Search tech stack categories...",value:p,onChange:s=>D(s.target.value),className:"flex h-10 w-full rounded-md border border-input bg-white dark:bg-slate-800 text-gray-900 dark:text-white px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10"})]})}),T?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading tech stack categories..."})}):k.length===0?e.jsx(w,{className:"glass border border-primary/30",children:e.jsx(S,{className:"py-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No tech stack categories found"})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(s=>{const r=B(s.icon);return e.jsxs(w,{className:"glass border border-primary/30 relative",children:[e.jsx("div",{className:"absolute -top-2 -left-2 bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold z-10",children:s.order}),e.jsx(P,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"w-5 h-5 text-primary"}),s.title]}),e.jsxs(M,{className:"mt-1",children:["Skills: ",s.skills.length]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(g,{size:"sm",variant:"ghost",onClick:()=>{c(s),x(!0)},className:"h-8 w-8 p-0",children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx(g,{size:"sm",variant:"ghost",onClick:()=>O(s._id,"delete"),className:"h-8 w-8 p-0 text-red-500 hover:text-red-500",children:e.jsx(se,{className:"w-4 h-4"})})]})]})}),e.jsx(S,{children:e.jsx("div",{className:"space-y-1",children:s.skills.map((a,o)=>e.jsxs("div",{className:"text-sm text-muted-foreground",children:["â€¢ ",a]},o))})})]},s._id)})})]})}),e.jsx(te,{isOpen:C.isOpen,onClose:N,onConfirm:F,title:"Confirm Deletion",message:"Are you sure you want to delete this tech stack category? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"destructive"})]})};export{ke as default};
//# sourceMappingURL=TechStackManager-BV9NOkVS.js.map
