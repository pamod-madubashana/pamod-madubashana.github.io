import{a as c,j as e}from"./ui-DPnNW4ni.js";import{c as _,D as L,a as D,N as F,m as i,d as T,e as I,L as z,F as M,p as R}from"./index-BKRUu3Yd.js";import{S as U}from"./search-BuCBEZQf.js";const G=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],J=_("funnel",G),n="projects:page:cache:v1",O=900*1e3,H=a=>{const r=a.replace("https://github.com/","").replace("http://github.com/","").split("/");return r.length<2?null:{owner:r[0],repo:r[1].replace(".git","")}},$=()=>{if(typeof window=="undefined")return null;const a=window.localStorage.getItem(n);if(!a)return null;try{const s=JSON.parse(a);return typeof s.timestamp!="number"||Date.now()-s.timestamp>O||!Array.isArray(s.projects)||typeof s.githubStats!="object"||s.githubStats===null?(window.localStorage.removeItem(n),null):s}catch(s){return window.localStorage.removeItem(n),null}},q=(a,s)=>{if(typeof window=="undefined")return;const r={timestamp:Date.now(),projects:a,githubStats:s};window.localStorage.setItem(n,JSON.stringify(r))},W=()=>{const[a,s]=c.useState("All"),[r,A]=c.useState(""),[d,w]=c.useState([]),[k,N]=c.useState({}),[v,S]=c.useState(!0),[h,C]=c.useState(null);c.useEffect(()=>{const t=$();if(t){w(t.projects),N(t.githubStats),S(!1);return}let o=!0;return(async()=>{var p,m;try{const l=(await R.getProjects()).projects||[];if(!o)return;w(l);const f={};for(const j of l){if(!j.githubUrl)continue;const y=H(j.githubUrl);if(y)try{const b=await fetch(`https://api.github.com/repos/${y.owner}/${y.repo}`);if(!b.ok)continue;const P=await b.json();f[j._id]={stars:(p=P.stargazers_count)!=null?p:0,forks:(m=P.forks_count)!=null?m:0}}catch(b){continue}}if(!o)return;N(f),q(l,f)}catch(g){if(o){const l=g instanceof Error?g.message:"Failed to fetch projects";C(l)}}finally{o&&S(!1)}})(),()=>{o=!1}},[]);const E=["All",...new Set(d.flatMap(t=>t.tags))].slice(0,10),x=d.filter(t=>{const o=a==="All"||t.tags.includes(a),u=r.toLowerCase(),p=t.title.toLowerCase().includes(u)||t.description.toLowerCase().includes(u)||t.tags.some(m=>m.toLowerCase().includes(u));return o&&p});return e.jsxs("div",{className:"relative min-h-screen bg-background",children:[e.jsx(L,{}),e.jsx(D,{title:"Projects by Pamod Madubashana | Full-Stack Portfolio",description:"Browse full-stack projects by Pamod Madubashana, including production-ready web applications, experiments, and open-source engineering work.",path:"/projects",keywords:["Pamod projects","full-stack portfolio","web applications","open-source projects"],structuredData:{"@type":"CollectionPage","@id":"https://pamod.is-a.dev/projects#collection",url:"https://pamod.is-a.dev/projects",name:"Projects by Pamod Madubashana",description:"Portfolio collection of full-stack software projects."}}),e.jsx(F,{}),e.jsxs("main",{className:"route-transition-content relative z-10 pt-24 pb-20",children:[e.jsx("section",{className:"section-shell",children:e.jsx("div",{className:"section-inner",children:e.jsxs(i.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"page-hero-panel mx-auto max-w-4xl",children:[e.jsx("span",{className:"section-pill",children:"My Work"}),e.jsxs("h1",{className:"section-title text-4xl md:text-5xl lg:text-6xl",children:[e.jsx("span",{className:"text-foreground/75",children:"Featured"})," ",e.jsx("span",{className:"text-gradient",children:"Projects"})]}),e.jsx("p",{className:"section-copy mx-auto mt-5 max-w-2xl",children:"A curated collection of products, experiments, and open-source builds with clean architecture and practical impact."})]})})}),e.jsx("section",{className:"section-shell section-shell-muted py-10",children:e.jsx("div",{className:"section-inner",children:e.jsxs(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.45,delay:.15},className:"surface-card flex flex-col gap-5 backdrop-blur-2xl md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"relative w-full max-w-xl",children:[e.jsx(U,{className:"absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search projects...",value:r,onChange:t=>A(t.target.value),className:"h-11 w-full rounded-lg border border-border/70 bg-background/55 pl-10 pr-4 text-sm text-foreground outline-none transition focus:border-primary focus:ring-2 focus:ring-primary/30"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs font-semibold uppercase tracking-[0.12em] text-muted-foreground",children:[e.jsx(J,{className:"h-4 w-4"}),"Filter"]}),E.map(t=>e.jsx("button",{onClick:()=>s(t),className:`rounded-full border px-3 py-1.5 text-xs font-medium transition ${a===t?"border-primary/55 bg-primary/20 text-primary":"border-border/60 bg-background/35 text-muted-foreground hover:border-primary/35 hover:text-foreground"}`,children:t},t))]})]})})}),e.jsx("section",{className:"section-shell py-10",children:e.jsxs("div",{className:"section-inner",children:[e.jsx(T,{mode:"wait",children:e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.28},className:"grid grid-cols-1 gap-8 md:grid-cols-2 xl:grid-cols-3",children:x.map((t,o)=>e.jsx(I,{project:t,index:o,githubStats:k[t._id]},t._id))},a+r)}),(v||h||x.length===0&&d.length>0)&&e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-8 md:grid-cols-2 xl:grid-cols-3",children:v?e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},className:"col-span-3 py-20 text-center",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(z,{className:"h-8 w-8 animate-spin text-primary"})}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading projects..."})]}):h?e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},className:"col-span-3 py-20 text-center",children:e.jsxs("p",{className:"text-destructive",children:["Error: ",h]})}):x.length===0&&d.length>0?e.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},className:"col-span-3 py-20 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No projects found matching your criteria."})}):null})]})})]}),e.jsx("div",{className:"relative z-10",children:e.jsx(M,{})})]})};export{W as default};
