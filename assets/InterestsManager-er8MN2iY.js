import{a as h,j as e}from"./ui-DPnNW4ni.js";import{C as k,b as _,a as H,c as U}from"./card-CstHLFes.js";import{c as T,A as f,r as c,s as D,t as G,i as q,v as K,B as x,j as J,w as R,k as V,I as y,P as X,C as Q}from"./index-E5yFclhN.js";import{L as v}from"./label-C2nbGQ4U.js";import{r as W,a as Y,b as Z}from"./orderUtils-CtTJ9iqJ.js";import{P as ee,S as te,T as re,C as se}from"./ConfirmDialog-C69hcbGx.js";import{S as ae}from"./save-CcyEnk7P.js";import{S as ne}from"./search-C90xBteo.js";import{H as $}from"./heart-e3OnOaK0.js";import{M as oe,C as ie}from"./music-tfTOru-5.js";import{D as le}from"./database-DZ8SBQFv.js";const ce=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],de=T("book-open",ce);const he=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],ue=T("gamepad-2",he),b={getInterests:async(r=!1)=>{const o=D.interests();if(!r){const i=c.get(o);if(i)return i}const a=await fetch(`${f}/enhanced-dashboard/interests`);if(!a.ok){const i=await a.text();throw new Error(`Failed to fetch interests: ${a.status} - ${i}`)}const n=await a.json();return c.set(o,n),n},getAllInterests:async(r,o=!1)=>{const a=D.interests();if(!o){const d=c.get(a);if(d)return d}const n=await fetch(`${f}/interests`,{headers:{Authorization:`Bearer ${r}`}});if(!n.ok){const d=await n.text();throw new Error(`Failed to fetch all interests: ${n.status} - ${d}`)}const i=await n.json();return c.set(a,i),i},createInterest:async(r,o)=>{const a=await fetch(`${f}/interests`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(o)});if(!a.ok){const i=await a.text();throw new Error(`Failed to create interest: ${a.status} - ${i}`)}const n=await a.json();return c.invalidate("interests:*"),c.invalidate("about:*"),c.invalidate("dashboard:*"),n},updateInterest:async(r,o,a)=>{const n=await fetch(`${f}/interests/${o}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(a)});if(!n.ok){const d=await n.text();throw new Error(`Failed to update interest: ${n.status} - ${d}`)}const i=await n.json();return c.invalidate("interests:*"),c.invalidate("about:*"),c.invalidate("dashboard:*"),i},deleteInterest:async(r,o)=>{const a=await fetch(`${f}/interests/${o}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}});if(!a.ok){const n=await a.text();throw new Error(`Failed to delete interest: ${a.status} - ${n}`)}c.invalidate("interests:*"),c.invalidate("about:*"),c.invalidate("dashboard:*")}},Ce=()=>{const{token:r}=G(),[o,a]=h.useState([]),[n,i]=h.useState([]),[d,S]=h.useState(""),[E,w]=h.useState(!0),[A,g]=h.useState(!1),[s,m]=h.useState(null),[u,p]=h.useState({icon:"Heart",label:"",order:0}),[N,C]=h.useState({isOpen:!1,id:"",type:""}),j=async(t=!1)=>{if(!r){w(!1);return}try{const l=await b.getAllInterests(r,t);a(l)}catch(l){console.error("Error fetching interests:",l)}finally{w(!1)}};h.useEffect(()=>{j()},[r]),h.useEffect(()=>{if(!d)i(o);else{const t=d.toLowerCase();i(o.filter(l=>l.label.toLowerCase().includes(t)))}},[d,o]);const O=async()=>{if(r)try{await Y(o,u.order,"/interests",r),await b.createInterest(r,u),await j(!0),p({icon:"Heart",label:"",order:0}),g(!1)}catch(t){console.error("Error creating interest:",t)}},F=async()=>{if(!(!s||!r))try{await W(o,s._id,s.order,"/interests",r),await b.updateInterest(r,s._id,{icon:s.icon,label:s.label,order:s.order}),await j(!0),m(null)}catch(t){console.error("Error updating interest:",t)}},B=async t=>{if(r)try{const l=o.find(P=>P._id===t);if(!l)return;await Z(o,l.order,"/interests",r),await b.deleteInterest(r,t),await j(!0)}catch(l){console.error("Error deleting interest:",l)}},L=(t,l)=>{C({isOpen:!0,id:t,type:l})},I=()=>{C({isOpen:!1,id:"",type:""})},z=()=>{B(N.id),I()},M=t=>{switch(t){case"Code2":return Q;case"Database":return le;case"Palette":return X;case"Coffee":return ie;case"Gamepad2":return ue;case"BookOpen":return de;case"Music":return oe;case"Heart":return $;default:return $}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"min-h-screen from-gray-900 to-gray-800 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("header",{className:"mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Interests Manager"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your personal interests"})]}),e.jsxs(q,{open:A,onOpenChange:g,children:[e.jsx(K,{asChild:!0,children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"w-4 h-4"}),"New Interest"]})}),e.jsxs(J,{className:"max-w-3xl max-h-[90vh] overflow-y-auto bg-gray-900 text-white border border-gray-700",children:[e.jsx(R,{children:e.jsx(V,{children:s?"Edit Interest":"Add New Interest"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"label",children:"Interest Label"}),e.jsx(y,{id:"label",value:s?s.label:u.label,onChange:t=>s?m({...s,label:t.target.value}):p({...u,label:t.target.value}),placeholder:"e.g., Telegram Bot Development",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"icon",children:"Icon"}),e.jsxs("select",{id:"icon",value:s?s.icon:u.icon,onChange:t=>s?m({...s,icon:t.target.value}):p({...u,icon:t.target.value}),className:"w-full rounded-md border-none bg-gray-800 px-3 py-2 text-white focus:ring-0 focus:ring-offset-0",children:[e.jsx("option",{value:"Heart",children:"Heart"}),e.jsx("option",{value:"Code2",children:"Code"}),e.jsx("option",{value:"Database",children:"Database"}),e.jsx("option",{value:"Palette",children:"Palette"}),e.jsx("option",{value:"Coffee",children:"Coffee"}),e.jsx("option",{value:"Gamepad2",children:"Gamepad"}),e.jsx("option",{value:"BookOpen",children:"Book"}),e.jsx("option",{value:"Music",children:"Music"})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"order",children:"Order"}),e.jsx(y,{id:"order",type:"number",value:s?s.order:u.order,onChange:t=>s?m({...s,order:parseInt(t.target.value)}):p({...u,order:parseInt(t.target.value)}),placeholder:"Order position",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(x,{variant:"outline",onClick:()=>{g(!1),m(null)},className:"border-input text-foreground hover:bg-accent hover:text-accent-foreground",children:"Cancel"}),e.jsxs(x,{onClick:s?F:O,children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),s?"Update":"Add"]})]})]})]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(y,{placeholder:"Search interests...",value:d,onChange:t=>S(t.target.value),className:"flex h-10 w-full rounded-md border border-input bg-white dark:bg-slate-800 text-gray-900 dark:text-white px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10"})]})}),E?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"Loading interests..."})}):n.length===0?e.jsx(k,{className:"glass border border-primary/30",children:e.jsx(_,{className:"py-12 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:"No interests found"})})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(t=>{const l=M(t.icon);return e.jsxs(k,{className:"glass border border-primary/30 relative",children:[e.jsx("div",{className:"absolute -top-2 -left-2 bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold z-10",children:t.order}),e.jsx(H,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:e.jsxs(U,{className:"flex items-center gap-2",children:[e.jsx(l,{className:"w-5 h-5 text-primary"}),t.label]})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>{m(t),g(!0)},className:"h-8 w-8 p-0",children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>L(t._id,"delete"),className:"h-8 w-8 p-0 text-red-500 hover:text-red-500",children:e.jsx(re,{className:"w-4 h-4"})})]})]})})]},t._id)})})]})}),e.jsx(se,{isOpen:N.isOpen,onClose:I,onConfirm:z,title:"Confirm Deletion",message:"Are you sure you want to delete this interest? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"destructive"})]})};export{Ce as default};
