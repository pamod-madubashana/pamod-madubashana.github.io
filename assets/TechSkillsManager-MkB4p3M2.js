import{a as u,b as we,j as t,d as A,P as L,u as I,f as be,F as ye,G as je,k as ke}from"./ui-DPnNW4ni.js";import{C as Z,b as ee,a as Ce,c as Ne,d as De}from"./card-C6jvMhtf.js";import{f as Pe,A as K,q as C,r as te,s as Ee,i as Te,t as Re,B as O,j as _e,v as Ae,k as Ie,I as U,y as Me}from"./index-_MKQkiHY.js";import{L as Y}from"./label-BmoUIqAP.js";import{u as Be}from"./index-BfNW_BBT.js";import{r as $e,a as Ke,b as Oe}from"./orderUtils-BhqeG7jd.js";import{P as Le,S as Ve,T as Fe,C as ze}from"./ConfirmDialog-Cm49nqns.js";import{S as He}from"./save-Ca4_9D7_.js";import{S as Ue}from"./search-5CdaRNx3.js";import{C as re,S as Ye}from"./server-BcEJMHoZ.js";import{C as Ge}from"./cloud-BpZAdPhZ.js";import{D as Je}from"./database-CbE7LX0e.js";function se(e,[r,s]){return Math.min(s,Math.max(r,e))}var ne=["PageUp","PageDown"],oe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ae={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},M="Slider",[G,Xe,qe]=be(M),[ie]=ke(M,[qe]),[We,F]=ie(M),le=u.forwardRef((e,r)=>{const{name:s,min:n=0,max:a=100,step:i=1,orientation:l="horizontal",disabled:d=!1,minStepsBetweenThumbs:h=0,defaultValue:b=[n],value:p,onValueChange:o=()=>{},onValueCommit:f=()=>{},inverted:m=!1,form:y,...S}=e,x=u.useRef(new Set),g=u.useRef(0),j=l==="horizontal"?Qe:Ze,[w=[],D]=we({prop:p,defaultProp:b,onChange:k=>{var R;(R=[...x.current][g.current])==null||R.focus(),o(k)}}),T=u.useRef(w);function B(k){const P=nt(w,k);v(k,P)}function z(k){v(k,g.current)}function c(){const k=T.current[g.current];w[g.current]!==k&&f(w)}function v(k,P,{commit:R}={commit:!1}){const W=lt(i),H=ct(Math.round((k-n)/i)*i+n,W),$=se(H,[n,a]);D((_=[])=>{const E=rt(_,$,P);if(it(E,h*i)){g.current=E.indexOf($);const Q=String(E)!==String(_);return Q&&R&&f(E),Q?E:_}else return _})}return t.jsx(We,{scope:e.__scopeSlider,name:s,disabled:d,min:n,max:a,valueIndexToChangeRef:g,thumbs:x.current,values:w,orientation:l,form:y,children:t.jsx(G.Provider,{scope:e.__scopeSlider,children:t.jsx(G.Slot,{scope:e.__scopeSlider,children:t.jsx(j,{"aria-disabled":d,"data-disabled":d?"":void 0,...S,ref:r,onPointerDown:A(S.onPointerDown,()=>{d||(T.current=w)}),min:n,max:a,inverted:m,onSlideStart:d?void 0:B,onSlideMove:d?void 0:z,onSlideEnd:d?void 0:c,onHomeKeyDown:()=>!d&&v(n,0,{commit:!0}),onEndKeyDown:()=>!d&&v(a,w.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:P})=>{if(!d){const H=ne.includes(k.key)||k.shiftKey&&oe.includes(k.key)?10:1,$=g.current,_=w[$],E=i*H*P;v(_+E,$,{commit:!0})}}})})})})});le.displayName=M;var[ce,de]=ie(M,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Qe=u.forwardRef((e,r)=>{const{min:s,max:n,dir:a,inverted:i,onSlideStart:l,onSlideMove:d,onSlideEnd:h,onStepKeyDown:b,...p}=e,[o,f]=u.useState(null),m=I(r,j=>f(j)),y=u.useRef(void 0),S=ye(a),x=S==="ltr",g=x&&!i||!x&&i;function N(j){const w=y.current||o.getBoundingClientRect(),D=[0,w.width],B=q(D,g?[s,n]:[n,s]);return y.current=w,B(j-w.left)}return t.jsx(ce,{scope:e.__scopeSlider,startEdge:g?"left":"right",endEdge:g?"right":"left",direction:g?1:-1,size:"width",children:t.jsx(ue,{dir:S,"data-orientation":"horizontal",...p,ref:m,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const w=N(j.clientX);l==null||l(w)},onSlideMove:j=>{const w=N(j.clientX);d==null||d(w)},onSlideEnd:()=>{y.current=void 0,h==null||h()},onStepKeyDown:j=>{const D=ae[g?"from-left":"from-right"].includes(j.key);b==null||b({event:j,direction:D?-1:1})}})})}),Ze=u.forwardRef((e,r)=>{const{min:s,max:n,inverted:a,onSlideStart:i,onSlideMove:l,onSlideEnd:d,onStepKeyDown:h,...b}=e,p=u.useRef(null),o=I(r,p),f=u.useRef(void 0),m=!a;function y(S){const x=f.current||p.current.getBoundingClientRect(),g=[0,x.height],j=q(g,m?[n,s]:[s,n]);return f.current=x,j(S-x.top)}return t.jsx(ce,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:t.jsx(ue,{"data-orientation":"vertical",...b,ref:o,style:{...b.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:S=>{const x=y(S.clientY);i==null||i(x)},onSlideMove:S=>{const x=y(S.clientY);l==null||l(x)},onSlideEnd:()=>{f.current=void 0,d==null||d()},onStepKeyDown:S=>{const g=ae[m?"from-bottom":"from-top"].includes(S.key);h==null||h({event:S,direction:g?-1:1})}})})}),ue=u.forwardRef((e,r)=>{const{__scopeSlider:s,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:d,onStepKeyDown:h,...b}=e,p=F(M,s);return t.jsx(L.span,{...b,ref:r,onKeyDown:A(e.onKeyDown,o=>{o.key==="Home"?(l(o),o.preventDefault()):o.key==="End"?(d(o),o.preventDefault()):ne.concat(oe).includes(o.key)&&(h(o),o.preventDefault())}),onPointerDown:A(e.onPointerDown,o=>{const f=o.target;f.setPointerCapture(o.pointerId),o.preventDefault(),p.thumbs.has(f)?f.focus():n(o)}),onPointerMove:A(e.onPointerMove,o=>{o.target.hasPointerCapture(o.pointerId)&&a(o)}),onPointerUp:A(e.onPointerUp,o=>{const f=o.target;f.hasPointerCapture(o.pointerId)&&(f.releasePointerCapture(o.pointerId),i(o))})})}),fe="SliderTrack",he=u.forwardRef((e,r)=>{const{__scopeSlider:s,...n}=e,a=F(fe,s);return t.jsx(L.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:r})});he.displayName=fe;var J="SliderRange",me=u.forwardRef((e,r)=>{const{__scopeSlider:s,...n}=e,a=F(J,s),i=de(J,s),l=u.useRef(null),d=I(r,l),h=a.values.length,b=a.values.map(f=>xe(f,a.min,a.max)),p=h>1?Math.min(...b):0,o=100-Math.max(...b);return t.jsx(L.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:d,style:{...e.style,[i.startEdge]:p+"%",[i.endEdge]:o+"%"}})});me.displayName=J;var X="SliderThumb",ge=u.forwardRef((e,r)=>{const s=Xe(e.__scopeSlider),[n,a]=u.useState(null),i=I(r,d=>a(d)),l=u.useMemo(()=>n?s().findIndex(d=>d.ref.current===n):-1,[s,n]);return t.jsx(et,{...e,ref:i,index:l})}),et=u.forwardRef((e,r)=>{const{__scopeSlider:s,index:n,name:a,...i}=e,l=F(X,s),d=de(X,s),[h,b]=u.useState(null),p=I(r,N=>b(N)),o=h?l.form||!!h.closest("form"):!0,f=je(h),m=l.values[n],y=m===void 0?0:xe(m,l.min,l.max),S=st(n,l.values.length),x=f==null?void 0:f[d.size],g=x?ot(x,y,d.direction):0;return u.useEffect(()=>{if(h)return l.thumbs.add(h),()=>{l.thumbs.delete(h)}},[h,l.thumbs]),t.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${y}% + ${g}px)`},children:[t.jsx(G.ItemSlot,{scope:e.__scopeSlider,children:t.jsx(L.span,{role:"slider","aria-label":e["aria-label"]||S,"aria-valuemin":l.min,"aria-valuenow":m,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:p,style:m===void 0?{display:"none"}:e.style,onFocus:A(e.onFocus,()=>{l.valueIndexToChangeRef.current=n})})}),o&&t.jsx(pe,{name:a!=null?a:l.name?l.name+(l.values.length>1?"[]":""):void 0,form:l.form,value:m},n)]})});ge.displayName=X;var tt="RadioBubbleInput",pe=u.forwardRef(({__scopeSlider:e,value:r,...s},n)=>{const a=u.useRef(null),i=I(a,n),l=Be(r);return u.useEffect(()=>{const d=a.current;if(!d)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"value").set;if(l!==r&&p){const o=new Event("input",{bubbles:!0});p.call(d,r),d.dispatchEvent(o)}},[l,r]),t.jsx(L.input,{style:{display:"none"},...s,ref:i,defaultValue:r})});pe.displayName=tt;function rt(e=[],r,s){const n=[...e];return n[s]=r,n.sort((a,i)=>a-i)}function xe(e,r,s){const i=100/(s-r)*(e-r);return se(i,[0,100])}function st(e,r){return r>2?`Value ${e+1} of ${r}`:r===2?["Minimum","Maximum"][e]:void 0}function nt(e,r){if(e.length===1)return 0;const s=e.map(a=>Math.abs(a-r)),n=Math.min(...s);return s.indexOf(n)}function ot(e,r,s){const n=e/2,i=q([0,50],[0,n]);return(n-i(r)*s)*s}function at(e){return e.slice(0,-1).map((r,s)=>e[s+1]-r)}function it(e,r){if(r>0){const s=at(e);return Math.min(...s)>=r}return!0}function q(e,r){return s=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const n=(r[1]-r[0])/(e[1]-e[0]);return r[0]+n*(s-e[0])}}function lt(e){return(String(e).split(".")[1]||"").length}function ct(e,r){const s=Math.pow(10,r);return Math.round(e*s)/s}var ve=le,dt=he,ut=me,ft=ge;const Se=u.forwardRef(({className:e,...r},s)=>t.jsxs(ve,{ref:s,className:Pe("relative flex w-full touch-none select-none items-center",e),...r,children:[t.jsx(dt,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:t.jsx(ut,{className:"absolute h-full bg-primary"})}),t.jsx(ft,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Se.displayName=ve.displayName;const V={getTechSkills:async(e=!1)=>{const r=te.techSkills();if(!e){const a=C.get(r);if(a)return a}const s=await fetch(`${K}/enhanced-dashboard/tech-skills`);if(!s.ok){const a=await s.text();throw new Error(`Failed to fetch tech skills: ${s.status} - ${a}`)}const n=await s.json();return C.set(r,n),n},getAllTechSkills:async(e,r=!1)=>{const s=te.techSkills();if(!r){const i=C.get(s);if(i)return i}const n=await fetch(`${K}/tech-skills`,{headers:{Authorization:`Bearer ${e}`}});if(!n.ok){const i=await n.text();throw new Error(`Failed to fetch all tech skills: ${n.status} - ${i}`)}const a=await n.json();return C.set(s,a),a},createTechSkill:async(e,r)=>{const s=await fetch(`${K}/tech-skills`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(r)});if(!s.ok){const a=await s.text();throw new Error(`Failed to create tech skill: ${s.status} - ${a}`)}const n=await s.json();return C.invalidate("techskills:*"),C.invalidate("dashboard:*"),n},updateTechSkill:async(e,r,s)=>{const n=await fetch(`${K}/tech-skills/${r}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(s)});if(!n.ok){const i=await n.text();throw new Error(`Failed to update tech skill: ${n.status} - ${i}`)}const a=await n.json();return C.invalidate("techskills:*"),C.invalidate("dashboard:*"),a},deleteTechSkill:async(e,r)=>{const s=await fetch(`${K}/tech-skills/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}});if(!s.ok){const n=await s.text();throw new Error(`Failed to delete tech skill: ${s.status} - ${n}`)}C.invalidate("techskills:*"),C.invalidate("dashboard:*")}},Ct=()=>{const{token:e}=Ee(),[r,s]=u.useState([]),[n,a]=u.useState([]),[i,l]=u.useState(""),[d,h]=u.useState(!0),[b,p]=u.useState(!1),[o,f]=u.useState(null),[m,y]=u.useState({name:"",level:50,order:0}),[S,x]=u.useState({isOpen:!1,id:"",type:""}),g=async(c=!1)=>{if(!e){h(!1);return}try{const v=await V.getAllTechSkills(e,c);s(v)}catch(v){console.error("Error fetching tech skills:",v)}finally{h(!1)}};u.useEffect(()=>{g()},[e]),u.useEffect(()=>{if(!i)a(r);else{const c=i.toLowerCase();a(r.filter(v=>v.name.toLowerCase().includes(c)))}},[i,r]);const N=async()=>{if(e)try{await Ke(r,m.order,"/tech-skills",e),await V.createTechSkill(e,m),await g(!0),y({name:"",level:50,order:0}),p(!1)}catch(c){console.error("Error creating tech skill:",c)}},j=async()=>{if(!(!o||!e))try{await $e(r,o._id,o.order,"/tech-skills",e),await V.updateTechSkill(e,o._id,{name:o.name,level:o.level,order:o.order,category:o.category}),await g(!0),f(null)}catch(c){console.error("Error updating tech skill:",c)}},w=async c=>{if(e)try{const v=r.find(k=>k._id===c);if(!v)return;await Oe(r,v.order,"/tech-skills",e),await V.deleteTechSkill(e,c),await g(!0)}catch(v){console.error("Error deleting tech skill:",v)}},D=(c,v)=>{x({isOpen:!0,id:c,type:v})},T=()=>{x({isOpen:!1,id:"",type:""})},B=()=>{w(S.id),T()},z=c=>{if(!c)return re;switch(c.toLowerCase()){case"frontend":return Me;case"backend":return Ye;case"database":return Je;case"devops":return Ge;default:return re}};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"min-h-screen from-gray-900 to-gray-800 p-4 md:p-8",children:t.jsxs("div",{className:"max-w-6xl mx-auto",children:[t.jsx("header",{className:"mb-8",children:t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-white",children:"Tech Skills Manager"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage your technology skills"})]}),t.jsxs(Te,{open:b,onOpenChange:p,children:[t.jsx(Re,{asChild:!0,children:t.jsxs(O,{className:"flex items-center gap-2",children:[t.jsx(Le,{className:"w-4 h-4"}),"New Skill"]})}),t.jsxs(_e,{className:"max-w-3xl max-h-[90vh] overflow-y-auto bg-gray-900 text-white border border-gray-700",children:[t.jsx(Ae,{children:t.jsx(Ie,{children:o?"Edit Skill":"Add New Skill"})}),t.jsxs("div",{className:"grid gap-4 py-4",children:[t.jsxs("div",{className:"grid gap-2",children:[t.jsx(Y,{htmlFor:"name",children:"Skill Name"}),t.jsx(U,{id:"name",value:o?o.name:m.name,onChange:c=>o?f({...o,name:c.target.value}):y({...m,name:c.target.value}),placeholder:"e.g., JavaScript, Python, React",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsxs(Y,{htmlFor:"level",children:["Proficiency Level: ",o?o.level:m.level,"%"]}),t.jsx(Se,{id:"level",min:0,max:100,step:1,value:[o?o.level:m.level],onValueChange:c=>o?f({...o,level:c[0]}):y({...m,level:c[0]})})]}),t.jsxs("div",{className:"grid gap-2",children:[t.jsx(Y,{htmlFor:"order",children:"Order"}),t.jsx(U,{id:"order",type:"number",value:o?o.order:m.order,onChange:c=>o?f({...o,order:parseInt(c.target.value)}):y({...m,order:parseInt(c.target.value)}),placeholder:"Order position",className:"bg-gray-800 border-none text-white placeholder-gray-400 focus-visible:ring-0 focus-visible:ring-offset-0 resize-none"})]}),t.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[t.jsx(O,{variant:"outline",onClick:()=>{p(!1),f(null)},className:"border-input text-foreground hover:bg-accent hover:text-accent-foreground",children:"Cancel"}),t.jsxs(O,{onClick:o?j:N,children:[t.jsx(He,{className:"w-4 h-4 mr-2"}),o?"Update":"Add"]})]})]})]})]})]})}),t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"relative",children:[t.jsx(Ue,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),t.jsx(U,{placeholder:"Search tech skills...",value:i,onChange:c=>l(c.target.value),className:"flex h-10 w-full rounded-md border border-input bg-white dark:bg-slate-800 text-gray-900 dark:text-white px-3 py-2 ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm pl-10"})]})}),d?t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-muted-foreground",children:"Loading tech skills..."})}):n.length===0?t.jsx(Z,{className:"glass border border-primary/30",children:t.jsx(ee,{className:"py-12 text-center",children:t.jsx("p",{className:"text-muted-foreground",children:"No tech skills found"})})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(c=>{const v=z(c.category);return t.jsxs(Z,{className:"glass border border-primary/30 relative",children:[t.jsx("div",{className:"absolute -top-2 -left-2 bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold z-10",children:c.order}),t.jsx(Ce,{children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs(Ne,{className:"flex items-center gap-2",children:[t.jsx(v,{className:"w-5 h-5 text-primary"}),c.name]}),t.jsxs(De,{className:"mt-1",children:["Level: ",c.level,"%"]})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx(O,{size:"sm",variant:"ghost",onClick:()=>{f(c),p(!0)},className:"h-8 w-8 p-0",children:t.jsx(Ve,{className:"w-4 h-4"})}),t.jsx(O,{size:"sm",variant:"ghost",onClick:()=>D(c._id,"delete"),className:"h-8 w-8 p-0 text-red-500 hover:text-red-500",children:t.jsx(Fe,{className:"w-4 h-4"})})]})]})}),t.jsx(ee,{children:t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{children:"Proficiency"}),t.jsxs("span",{children:[c.level,"%"]})]}),t.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:t.jsx("div",{className:"bg-gradient-to-r from-primary to-secondary h-2 rounded-full",style:{width:`${c.level}%`}})})]})})]},c._id)})})]})}),t.jsx(ze,{isOpen:S.isOpen,onClose:T,onConfirm:B,title:"Confirm Deletion",message:"Are you sure you want to delete this tech skill? This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",variant:"destructive"})]})};export{Ct as default};
