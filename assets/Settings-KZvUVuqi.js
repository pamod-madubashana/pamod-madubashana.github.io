import{a as n,j as e}from"./ui-DPnNW4ni.js";import{c as L,s as A,w as P,I as l,B as F,x as j}from"./index-Dss7qE-E.js";import{C as p,a as f,c as S,d as y,b as v}from"./card-vEC6gx7w.js";import{L as r}from"./label-DLBDpJ8e.js";import{S as m}from"./switch-BLwvBcEI.js";import{S as E}from"./settings-CqoHjUrs.js";import{S as I}from"./save-B1lttTe7.js";import"./index-BfNW_BBT.js";const B=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],T=L("circle-check-big",B),J=()=>{const[i,o]=n.useState({siteSections:{showProjects:!0,showArticles:!0,showContact:!0},socialLinks:{github:"",linkedin:"",telegram:"",email:""}}),[w,b]=n.useState(!0),[g,x]=n.useState(!1),[N,u]=n.useState(!1),{token:d}=A();n.useEffect(()=>{(async()=>{try{const t=await j.getSettings(!0);o(a=>({...a,...t,socialLinks:{github:"",linkedin:"",telegram:"",email:"",...a.socialLinks||{},...t.socialLinks||{}}}))}catch(t){console.error("Error fetching settings:",t)}finally{b(!1)}})()},[d]);const h=(s,t)=>{o(a=>({...a,siteSections:{...a.siteSections,[s]:t}}))},c=(s,t)=>{o(a=>({...a,socialLinks:{...a.socialLinks,[s]:t}}))},{refreshSettings:k}=P(),C=async s=>{if(s.preventDefault(),!d){console.error("Authentication token is missing");return}x(!0);try{await j.updateSettings(d,i),u(!0),await k(!0),setTimeout(()=>u(!1),3e3)}catch(t){console.error("Error saving settings:",t)}finally{x(!1)}};return w?e.jsx("div",{className:"min-h-screen flex items-center justify-center from-gray-900 to-gray-800 p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading settings..."})]})}):e.jsx("div",{className:"min-h-screen from-gray-900 to-gray-800 p-4 md:p-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("header",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(E,{className:"w-8 h-8 text-primary"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Site Settings"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your portfolio site configuration"})]}),e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs(p,{className:"glass border border-primary/30 h-full",children:[e.jsxs(f,{children:[e.jsx(S,{children:"Social Links"}),e.jsx(y,{children:"Connect with visitors on social platforms"})]}),e.jsx(v,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"github",children:"GitHub Profile"}),e.jsx(l,{id:"github",type:"url",value:i.socialLinks.github||"",onChange:s=>c("github",s.target.value),placeholder:"https://github.com/username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"linkedin",children:"LinkedIn Profile"}),e.jsx(l,{id:"linkedin",type:"url",value:i.socialLinks.linkedin||"",onChange:s=>c("linkedin",s.target.value),placeholder:"https://linkedin.com/in/username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"telegram",children:"Telegram Profile"}),e.jsx(l,{id:"telegram",type:"url",value:i.socialLinks.telegram||"",onChange:s=>c("telegram",s.target.value),placeholder:"https://t.me/username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"email",children:"Email Address"}),e.jsx(l,{id:"email",type:"email",value:i.socialLinks.email||"",onChange:s=>c("email",s.target.value),placeholder:"you@example.com"})]})]})})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs(p,{className:"glass border border-primary/30 h-full",children:[e.jsxs(f,{children:[e.jsx(S,{children:"Site Sections"}),e.jsx(y,{children:"Control which sections are visible"})]}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"showProjects",children:"Show Projects Section"}),e.jsx(m,{id:"showProjects",checked:i.siteSections.showProjects,onCheckedChange:s=>h("showProjects",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"showArticles",children:"Show Articles Section"}),e.jsx(m,{id:"showArticles",checked:i.siteSections.showArticles,onCheckedChange:s=>h("showArticles",s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r,{htmlFor:"showContact",children:"Show Contact Section"}),e.jsx(m,{id:"showContact",checked:i.siteSections.showContact,onCheckedChange:s=>h("showContact",s)})]})]})})]})})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[e.jsx(F,{type:"submit",disabled:g,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-4 h-4"}),"Save Settings"]})}),N&&e.jsxs("div",{className:"flex items-center gap-2 text-green-500",children:[e.jsx(T,{className:"w-4 h-4"}),"Settings saved successfully!"]})]})]})]})})};export{J as default};
