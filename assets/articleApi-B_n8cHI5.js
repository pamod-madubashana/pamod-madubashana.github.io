import{A as i,a as o,b as n}from"./index-9JgBpA7N.js";const h={getPublishedArticles:async()=>{const r=n.articles.published(),a=o.get(r);if(a)return a;const t=await fetch(`${i}/articles`);if(!t.ok){const s=await t.text();throw new Error(`Failed to fetch published articles: ${t.status} - ${s}`)}const e=await t.json();return o.set(r,e),e},getAllArticles:async r=>{const a=n.articles.all(),t=o.get(a);if(t)return t;const e=await fetch(`${i}/articles/all`,{headers:{Authorization:`Bearer ${r}`}});if(!e.ok){const c=await e.text();throw new Error(`Failed to fetch all articles: ${e.status} - ${c}`)}const s=await e.json();return o.set(a,s),s},getArticleById:async r=>{const a=n.articles.byId(r),t=o.get(a);if(t)return t;const e=await fetch(`${i}/articles/${r}`);if(!e.ok){const c=await e.text();throw new Error(`Failed to fetch article: ${e.status} - ${c}`)}const s=await e.json();return o.set(a,s),s},createArticle:async(r,a)=>{const t=await fetch(`${i}/articles`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(a)});if(!t.ok){const s=await t.text();throw new Error(`Failed to create article: ${t.status} - ${s}`)}const e=await t.json();return o.invalidate("articles:*"),e},createArticleWithImage:async(r,a)=>{const t=await fetch(`${i}/articles/upload`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:a});if(!t.ok){const s=await t.text();throw new Error(`Failed to create article with image: ${t.status} - ${s}`)}const e=await t.json();return o.invalidate("articles:*"),e},updateArticle:async(r,a,t)=>{const e=await fetch(`${i}/articles/${a}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(t)});if(!e.ok){const c=await e.text();throw new Error(`Failed to update article: ${e.status} - ${c}`)}const s=await e.json();return o.delete(n.articles.byId(a)),o.invalidate("articles:*"),s},updateArticleWithImage:async(r,a,t)=>{const e=await fetch(`${i}/articles/upload/${a}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`},body:t});if(!e.ok){const c=await e.text();throw new Error(`Failed to update article with image: ${e.status} - ${c}`)}const s=await e.json();return o.delete(n.articles.byId(a)),o.invalidate("articles:*"),s},deleteArticle:async(r,a)=>{const t=await fetch(`${i}/articles/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`}});if(!t.ok){const s=await t.text();throw new Error(`Failed to delete article: ${t.status} - ${s}`)}const e=await t.json();return o.delete(n.articles.byId(a)),o.invalidate("articles:*"),e}};export{h as a};
